{% extends "base.html" %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'registar/stilovi/vencanica.css' %}">
{% endblock %}
{% load julian_dates %}

{% block content %}

<div class="page-header">
    <a href="#" class="back-button" onclick="history.back(); return false;" aria-label="Назад" title="Назад">
        <i class="bi bi-arrow-left"></i>
    </a>
    <h1 class="page-title">Венчаница</h1>
    <a href="{% url 'vencanje_pdf' vencanje.uid %}" target="_blank" style="text-decoration: none;">
        <button class="dugme-crveno" type="button" title="Штампај">
          <i class="bi bi-printer" style="margin-right: 6px;"></i> Штампај
        </button>
    </a>
</div>

<div class="vencanica">
    <div class="vencanica-frame" style="width: 185mm; margin-left: 14mm;">
        <!-- Knjiga/Strana/Tekuci broj -->
        <div style="position: absolute; top: var(--venc-knjiga-top); left: 5%; text-align: right; width: 18%;">
            <div style="margin-bottom: 2mm;">{{ vencanje.knjiga }}</div>
            <div style="margin-bottom: 2mm;">{{ vencanje.strana }}</div>
            <div>{{ vencanje.tekuci_broj }}</div>
        </div>

        <!-- епархије -->
        <div style="position: absolute; top: var(--venc-eparhija-top); right: 20%; text-align: right;">
            епархије
        </div>

        <!-- БЕОГРАДСКО-КАРЛОВАЧКЕ and hram -->
        <div style="position: absolute; top: var(--venc-hram-top); left: 10%; right: 5%; display: flex;">
            <div style="width: 45%;">БЕОГРАДСКО - КАРЛОВАЧКЕ</div>
            <div style="width: 20%;"></div>
            <div style="width: 35%; text-align: right;">{{ vencanje.hram }}</div>
        </div>

        <!-- mesto / godina -->
        <div style="position: absolute; top: var(--venc-mesto-top); left: 10%; right: 5%; display: flex;">
            <div style="width: 55%; text-align: center; padding-left: 10%;">{{ vencanje.mesto_zenika }}</div>
            <div style="width: 45%; padding-left: 6%;">{{ vencanje.datum|date:"y" }}</div>
        </div>

        <!-- Field 1a: Ime zenika -->
        <div class="venc-absolute-field" style="top: var(--venc-field1a-top); font-size: 9pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.ime_zenika }}, {{ vencanje.zanimanje_zenika|lower }},<br>
            <small>{{ vencanje.adresa_zenika }}</small><br>
            <small>{{ vencanje.veroispovest_zenika|lower }} {{ vencanje.narodnost_zenika|lower }}</small>
        </div>

        <!-- Field 1b: Ime neveste -->
        <div class="venc-absolute-field" style="top: var(--venc-field1b-top); font-size: 9pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.ime_neveste }}, {{ vencanje.zanimanje_neveste|lower }},<br>
            <small>{{ vencanje.adresa_neveste }}</small><br>
            <small>{{ vencanje.veroispovest_neveste|lower }} {{ vencanje.narodnost.neveste|lower }}</small>
        </div>

        <!-- Field 2a: Roditelji zenika -->
        <div class="venc-absolute-field" style="top: var(--venc-field2a-top); font-size: 9pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.svekar }}<br>
            {{ vencanje.svekrva }}
        </div>

        <!-- Field 2b: Roditelji neveste -->
        <div class="venc-absolute-field" style="top: var(--venc-field2b-top); font-size: 9pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.tast }}<br>
            {{ vencanje.tasta }}
        </div>

        <!-- Field 3a: Rodjenje zenika -->
        <div class="venc-absolute-field" style="top: var(--venc-field3a-top); font-size: 10pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.datum_rodjenja_zenika|julian_date}}<br>
            {{ vencanje.mesto_rodjenja_zenika }}
        </div>

        <!-- Field 3b: Rodjenje neveste -->
        <div class="venc-absolute-field" style="top: var(--venc-field3b-top); font-size: 10pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.datum_rodjenja_neveste|julian_date }}<br>
            {{ vencanje.mesto_rodjenja_neveste }}
        </div>

        <!-- Field 4a: Brak zenika -->
        <div class="venc-absolute-field" style="top: var(--venc-field4a-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.zenik_rb_brak }}
        </div>

        <!-- Field 4b: Brak neveste -->
        <div class="venc-absolute-field" style="top: var(--venc-field4b-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.nevesta_rb_brak }}
        </div>

        <!-- Field 5: Datum ispita -->
        <div class="venc-absolute-field" style="top: var(--venc-field5-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.datum_ispita|julian_date }}
        </div>

        <!-- Field 6: Datum vencanja -->
        <div class="venc-absolute-field" style="top: var(--venc-field6-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.datum|julian_date }}
        </div>

        <!-- Field 7: Mesto i hram -->
        <div class="venc-absolute-field" style="top: var(--venc-field7-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.mesto_zenika }}, {{ vencanje.hram }}
        </div>

        <!-- Field 8: Svestenik -->
        <div class="venc-absolute-field" style="top: var(--venc-field8-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.svestenik }}
        </div>

        <!-- Field 9: Svedoci -->
        <div class="venc-absolute-field" style="top: var(--venc-field9-top); font-size: 10pt; letter-spacing: 1px; line-height: 1.2;">
            {{ vencanje.kum }}<br>
            {{ vencanje.stari_svat }}
        </div>

        <!-- Field 10: Razresenje -->
        <div class="venc-absolute-field" style="top: var(--venc-field10-top); font-size: 10pt; letter-spacing: 1px; line-height: 1.3;">
            {{ vencanje.razresenje }}<br>
            {% if vencanje.razresenje_primedba is not none %}{{ vencanje.razresenje_primedba}}{% endif %}
        </div>

        <!-- Field 11: Primedba -->
        <div class="venc-absolute-field" style="top: var(--venc-field11-top); font-size: 10pt; letter-spacing: 1px;">
            {{ vencanje.primedba|default_if_none:"" }}
        </div>

        <!-- Beogradske -->
        <div style="position: absolute; top: var(--venc-eparhija2-top); left: 62%; width: 30%; text-align: center; letter-spacing: 1px;">
            Београдске
        </div>

        <!-- Hram again -->
        <div style="position: absolute; top: var(--venc-hram2-top); left: 70%; width: 30%; text-align: center; letter-spacing: 1px;">
            {{ vencanje.hram }}
        </div>

        <!-- Bottom section -->
        <div style="position: absolute; top: var(--venc-bottom-top); left: 5%; right: 5%; display: flex; align-items: flex-end;">
            <div style="width: 9%; font-size: 9pt; letter-spacing: 1px;">{% now "j.F" %}</div>
            <div style="width: 5%; font-size: 9pt;">{% now "y" %}</div>
            <div style="width: 33%;"></div>
            <div style="width: 5%;"></div>
            <div style="width: 12%;">{{vencanje.svestenik.parohija}}</div>
            <div style="width: 30%; letter-spacing: 1px; font-size: 9pt;">при Храму Свете Петке</div>
        </div>

        <div style="position: absolute; top: calc(var(--venc-bottom-top) + 2.5%); left: 5%; letter-spacing: 1px;">
            Београду
        </div>
    </div>
</div>

{% endblock %}
