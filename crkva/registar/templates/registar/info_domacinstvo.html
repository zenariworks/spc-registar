{% extends "base.html" %}
{% load phone_filters %}
{% block content %}

<div class="u-page-header">
    <a href="{% url 'domacinstva' %}" class="back-button" aria-label="–ù–∞–∑–∞–¥" title="–ù–∞–∑–∞–¥ –Ω–∞ —Å–ø–∏—Å–∞–∫">
        <i class="fa-solid fa-arrow-left"></i>
    </a>
    <h1 class="u-page-title">–î–æ–º–∞—õ–∏–Ω—Å—Ç–≤–æ</h1>
</div>

<div class="card u-mb-6">
    <h2 class="u-mt-0 u-mb-4 u-flex-center u-gap-3">
        <i class="fa-solid fa-house u-icon-muted"></i>
        –î–æ–º–∞—õ–∏–Ω:
        <a href="{% url 'parohijan_detail' uid=domacinstvo.domacin.uid %}" class="u-link-primary">
            {{ domacinstvo.domacin.ime }} {{ domacinstvo.domacin.prezime }}
        </a>
    </h2>

    <div class="u-grid u-grid--auto u-mt-5">
        {% if domacinstvo.adresa %}
        <div>
            <strong class="u-label">–ê–¥—Ä–µ—Å–∞:</strong><br>
            üìç {{ domacinstvo.adresa }}
        </div>
        {% endif %}

        {% if domacinstvo.tel_fiksni or domacinstvo.tel_mobilni %}
        <div>
            <strong class="u-label">–¢–µ–ª–µ—Ñ–æ–Ω:</strong><br>
            {% if domacinstvo.tel_mobilni %}
                <a href="tel:{{ domacinstvo.tel_mobilni|tel_link }}" class="u-link-primary">
                    <i class="fa-solid {{ domacinstvo.tel_mobilni|phone_icon }}"></i>
                    {{ domacinstvo.tel_mobilni|format_phone }}
                </a>{% if domacinstvo.tel_fiksni %}<br>{% endif %}
            {% endif %}
            {% if domacinstvo.tel_fiksni %}
                <a href="tel:{{ domacinstvo.tel_fiksni|tel_link }}" class="u-link-primary">
                    <i class="fa-solid {{ domacinstvo.tel_fiksni|phone_icon }}"></i>
                    {{ domacinstvo.tel_fiksni|format_phone }}
                </a>
            {% endif %}
        </div>
        {% endif %}

        {% if domacinstvo.slava %}
        <div>
            <strong class="u-label">–°–ª–∞–≤–∞:</strong><br>
            <span class="u-badge u-badge--slava u-inline-block">
                {{ domacinstvo.slava }}
            </span>
        </div>
        {% endif %}

        <div>
            <strong class="u-label">–í–æ–¥–∏—Ü–µ:</strong><br>
            {% if domacinstvo.slavska_vodica %}‚úÖ –°–ª–∞–≤—Å–∫–∞ –≤–æ–¥–∏—Ü–∞<br>{% endif %}
            {% if domacinstvo.vaskrsnja_vodica %}‚úÖ –í–∞—Å–∫—Ä—à—ö–∞ –≤–æ–¥–∏—Ü–∞{% endif %}
            {% if not domacinstvo.slavska_vodica and not domacinstvo.vaskrsnja_vodica %}‚Äî{% endif %}
        </div>
    </div>

    {% if domacinstvo.napomena %}
    <div class="u-note u-mt-5">
        <strong class="u-label">–ù–∞–ø–æ–º–µ–Ω–∞:</strong><br>
        {{ domacinstvo.napomena }}
    </div>
    {% endif %}
</div>

{% if ukucani_zivi or ukucani_preminuli %}
<div class="u-mt-6">
    <h2 class="u-section-title u-mb-5">
        <i class="fa-solid fa-users"></i>
        –ß–ª–∞–Ω–æ–≤–∏ –¥–æ–º–∞—õ–∏–Ω—Å—Ç–≤–∞
    </h2>

    {% if ukucani_zivi %}
    <div class="u-mb-6">
        <h3 class="u-section-title u-section-title--success">
            <i class="fa-solid fa-circle u-text-small"></i>
            –ñ–∏–≤–∏ —á–ª–∞–Ω–æ–≤–∏ ({{ ukucani_zivi|length }})
        </h3>
        <ul class="spisak">
            {% for ukucanin in ukucani_zivi %}
            <li class="stavka u-border-left-success">
                <div class="u-flex-1">
                    <div class="u-font-medium u-mb-2">
                        {% if ukucanin.osoba %}
                            <a href="{% url 'parohijan_detail' uid=ukucanin.osoba.uid %}" class="u-link-primary">
                                {{ ukucanin.osoba.ime }} {{ ukucanin.osoba.prezime }}
                            </a>
                        {% else %}
                            {{ ukucanin.ime_ukucana }}
                        {% endif %}
                    </div>
                    <div class="u-text-muted u-text-small">
                        <span class="u-badge u-badge--role">
                            {{ ukucanin.get_uloga_display }}
                        </span>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if ukucani_preminuli %}
    <div>
        <h3 class="u-section-title u-text-muted">
            <i class="fa-solid fa-circle u-text-small"></i>
            –ü—Ä–µ–º–∏–Ω—É–ª–∏ —á–ª–∞–Ω–æ–≤–∏ ({{ ukucani_preminuli|length }})
        </h3>
        <ul class="spisak">
            {% for ukucanin in ukucani_preminuli %}
            <li class="stavka u-border-left-muted u-opacity-70">
                <div class="u-flex-1">
                    <div class="u-font-medium u-mb-2 u-text-strikethrough">
                        {% if ukucanin.osoba %}
                            {{ ukucanin.osoba.ime }} {{ ukucanin.osoba.prezime }}
                        {% else %}
                            {{ ukucanin.ime_ukucana }}
                        {% endif %}
                        ‚Ä†
                    </div>
                    <div class="u-text-muted u-text-small">
                        <span class="u-badge u-badge--role">
                            {{ ukucanin.get_uloga_display }}
                        </span>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
{% else %}
<div class="card u-p-4 u-text-center u-text-muted">
    <i class="fa-solid fa-users u-opacity-50" style="font-size: 2em; margin-bottom: 10px;"></i>
    <p>–ù–µ–º–∞ –ø–æ–¥–∞—Ç–∞–∫–∞ –æ —á–ª–∞–Ω–æ–≤–∏–º–∞ –¥–æ–º–∞—õ–∏–Ω—Å—Ç–≤–∞.</p>
</div>
{% endif %}

{% endblock %}
