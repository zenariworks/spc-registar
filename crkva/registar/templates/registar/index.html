{% extends "base.html" %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'registar/pages/slava_kalendar.css' %}">
{% endblock %}
{% block content %}

<!-- Main Content Grid -->
<div class="grid">
  
  <!-- Quick Actions -->
  <div class="card">
    <div class="card__header">
      <h3><i class="fa-solid fa-bolt"></i> Брзе акције</h3>
    </div>
    <div class="actions">
      <a href="{% url 'unos_krstenja' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-circle-plus"></i></div>
        <div class="actions__text">
          <div class="actions__title">Унос крштења</div>
          <div class="actions__desc">Додај ново крштење</div>
        </div>
      </a>
      <a href="{% url 'unos_vencanja' %}" class="actions__item">
        <div class="actions__icon"><i class="icon-rings"></i></div>
        <div class="actions__text">
          <div class="actions__title">Унос венчања</div>
          <div class="actions__desc">Додај ново венчање</div>
        </div>
      </a>
      <a href="{% url 'unos_parohijana' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-user-plus"></i></div>
        <div class="actions__text">
          <div class="actions__title">Унос парохијана</div>
          <div class="actions__desc">Додај новог парохијана</div>
        </div>
      </a>
      <a href="{% url 'slava_kalendar' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-calendar-days"></i></div>
        <div class="actions__text">
          <div class="actions__title">Календар слава</div>
          <div class="actions__desc">Прегледај славе</div>
        </div>
      </a>
    </div>
  </div>

  <!-- Slava Calendar Widget -->
  <div class="card">
    <div class="card__header">
      <h3><i class="fa-solid fa-calendar-days"></i> Актуелне славе</h3>
      <a href="{% url 'slava_kalendar' %}" class="card__link">
        <i class="fa-solid fa-arrow-right"></i> Календар
      </a>
    </div>

    <div class="dashboard-calendar">
      {% for day in calendar_cells %}
        <div class="calendar-cell {% if day.is_today %}today{% endif %} {% if day.is_important %}important{% endif %} {% if day.is_fasting %}fasting fasting-{{ day.fasting_type }}{% endif %}">
          {% if day.is_fasting %}
            <div class="fasting-info">
              {% if day.fasting_type == 'вода' %}
                <i class="fa-solid fa-droplet fasting-icon"></i>
              {% elif day.fasting_type == 'уље' %}
                <i class="fa-solid fa-droplet fasting-icon icon-oil"></i>
              {% elif day.fasting_type == 'риба' %}
                <i class="fa-solid fa-fish fasting-icon"></i>
              {% elif day.fasting_type == 'бели_мрс' %}
                <i class="fa-solid fa-cheese fasting-icon"></i>
              {% endif %}
              <span class="fasting-tooltip">{{ day.fasting_display }}: {{ day.fasting_description }}</span>
            </div>
          {% endif %}
          <div class="cell-header">
            <div class="date-wrapper">
              <div class="date">{{ day.date.day }}.</div>
              <div class="weekday">{{ day.day_label }}</div>
            </div>
          </div>
          {% if day.slave %}
            <div class="slavas">
              {% for slava in day.slave %}
                <div>{{ slava.naziv }}</div>
              {% endfor %}
            </div>
          {% else %}
            <div class="no-slavas-text">Нема слава</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Registry Overview -->
  <div class="registry">
    <div class="card__header">
      <h3><i class="fa-solid fa-box-archive"></i> Регистри</h3>
    </div>
    <div class="registry__grid">
      <a href="{% url 'parohijani' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-users"></i></div>
        <div class="registry__info">
          <div class="registry__title">Парохијани</div>
          <div class="registry__desc">Евиденција парохијана</div>
        </div>
      </a>
      <a href="{% url 'krstenja' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-droplet"></i></div>
        <div class="registry__info">
          <div class="registry__title">Крштења</div>
          <div class="registry__desc">Књига крштених</div>
        </div>
      </a>
      <a href="{% url 'vencanja' %}" class="registry__card">
        <div class="registry__icon"><i class="icon-rings"></i></div>
        <div class="registry__info">
          <div class="registry__title">Венчања</div>
          <div class="registry__desc">Књига венчаних</div>
        </div>
      </a>
      <a href="{% url 'svestenici' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-id-badge"></i></div>
        <div class="registry__info">
          <div class="registry__title">Свештеници</div>
          <div class="registry__desc">Евиденција свештеника</div>
        </div>
      </a>
    </div>
  </div>

</div>

{% endblock %}
