{% extends "base.html" %}
{% load static %}
{% block content %}

<!-- Main Content Grid -->
<div class="grid">
  
  <!-- Quick Actions -->
  <div class="card">
    <div class="card__header">
      <h3><i class="fa-solid fa-bolt"></i> Брзе акције</h3>
    </div>
    <div class="actions">
      <a href="{% url 'unos_krstenja' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-circle-plus"></i></div>
        <div class="actions__text">
          <div class="actions__title">Унос крштења</div>
          <div class="actions__desc">Додај ново крштење</div>
        </div>
      </a>
      <a href="{% url 'unos_vencanja' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-rings-wedding"></i></div>
        <div class="actions__text">
          <div class="actions__title">Унос венчања</div>
          <div class="actions__desc">Додај ново венчање</div>
        </div>
      </a>
      <a href="{% url 'unos_parohijana' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-user-plus"></i></div>
        <div class="actions__text">
          <div class="actions__title">Унос парохијана</div>
          <div class="actions__desc">Додај новог парохијана</div>
        </div>
      </a>
      <a href="{% url 'slava_kalendar' %}" class="actions__item">
        <div class="actions__icon"><i class="fa-solid fa-calendar-days"></i></div>
        <div class="actions__text">
          <div class="actions__title">Календар слава</div>
          <div class="actions__desc">Прегледај славе</div>
        </div>
      </a>
    </div>
  </div>

  <!-- Slava Calendar Widget -->
  <div class="card">
    <div class="card__header">
      <h3><i class="fa-solid fa-calendar"></i> Актуелне славе</h3>
      <a href="{% url 'slava_kalendar' %}" class="card__link">
        <i class="fa-solid fa-arrow-right"></i> Календар
      </a>
    </div>
    
    <div class="timeline">
      {% if juce_slave %}
        <div class="timeline__day timeline__day--yesterday">
          <div class="timeline__day-header">
            <span class="timeline__date">{{ juce_datum|date:"d.m." }}</span>
            <span class="timeline__label">јуче</span>
          </div>
          <div class="timeline__items">
            {% for slava in juce_slave %}
              <div class="timeline__item">
                <span class="timeline__name">{{ slava }}</span>
                {% if juce_post %}<span class="timeline__badge">Пост</span>{% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

      {% if danas_slave %}
        <div class="timeline__day timeline__day--today">
          <div class="timeline__day-header">
            <span class="timeline__date">{{ danas_datum|date:"d.m." }}</span>
            <span class="timeline__label">данас</span>
          </div>
          <div class="timeline__items">
            {% for slava in danas_slave %}
              <div class="timeline__item">
                <span class="timeline__name">{{ slava }}</span>
                {% if danas_post %}<span class="timeline__badge">Пост</span>{% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

      {% for dan in narednih_slave|slice:":3" %}
        <div class="timeline__day timeline__day--upcoming">
          <div class="timeline__day-header">
            <span class="timeline__date">{{ dan.datum|date:"d.m." }}</span>
            <span class="timeline__label">{{ dan.datum|date:"l"|lower }}</span>
          </div>
          <div class="timeline__items">
            {% for slava in dan.slave %}
              <div class="timeline__item">
                <span class="timeline__name">{{ slava }}</span>
                {% if dan.post %}<span class="timeline__badge">Пост</span>{% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}

      {% if not juce_slave and not danas_slave and not narednih_slave %}
        <div class="timeline__empty">
          <i class="fa-solid fa-calendar-xmark"></i>
          <p>Нема актуелних слава</p>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Registry Overview -->
  <div class="registry">
    <div class="card__header">
      <h3><i class="fa-solid fa-box-archive"></i> Регистри</h3>
    </div>
    <div class="registry__grid">
      <a href="{% url 'parohijani' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-users"></i></div>
        <div class="registry__info">
          <div class="registry__title">Парохијани</div>
          <div class="registry__desc">Евиденција парохијана</div>
        </div>
      </a>
      <a href="{% url 'krstenja' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-droplet"></i></div>
        <div class="registry__info">
          <div class="registry__title">Крштења</div>
          <div class="registry__desc">Књига крштених</div>
        </div>
      </a>
      <a href="{% url 'vencanja' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-rings-wedding"></i></div>
        <div class="registry__info">
          <div class="registry__title">Венчања</div>
          <div class="registry__desc">Књига венчаних</div>
        </div>
      </a>
      <a href="{% url 'svestenici' %}" class="registry__card">
        <div class="registry__icon"><i class="fa-solid fa-id-badge"></i></div>
        <div class="registry__info">
          <div class="registry__title">Свештеници</div>
          <div class="registry__desc">Евиденција свештеника</div>
        </div>
      </a>
    </div>
  </div>

</div>

{% endblock %}
