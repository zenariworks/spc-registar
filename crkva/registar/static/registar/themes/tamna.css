/* ==========================================================================
   ТАМНА ТЕМА (Dark Theme)
   ==========================================================================
   Организација:
   1. CSS варијабле (токени)
   2. Основни елементи (body, footer)
   3. Форме и инпути
   4. Картице и панели
   5. Листе и ставке
   6. Календар
   7. Временска линија (timeline)
   8. Бочна трака (sidebar)
   9. Utility компоненте
   ========================================================================== */

/* ==========================================================================
   1. CSS ВАРИЈАБЛЕ
   ========================================================================== */

:root[data-theme="dark"] {
  /* Примарна боја - задржава се бренд */
  --color-primary: #A21514;
  --color-primary-700: #9c1818;
  --color-primary-50: color-mix(in oklab, var(--color-primary) 14%, black);
  --color-primary-100: color-mix(in oklab, var(--color-primary) 22%, black);
  --color-primary-200: color-mix(in oklab, var(--color-primary) 32%, black);

  /* Текст */
  --color-text: #e5e7eb;
  --color-text-muted: #cbd5e1;

  /* Површине */
  --color-surface: #0b0f14;    /* позадина странице */
  --color-surface-1: #1f2937;  /* контроле */
  --color-surface-2: #111827;  /* картице/панели */

  /* Ивице */
  --color-border: #334155;

  /* Бочна трака */
  --sidebar-bg: linear-gradient(180deg, var(--color-surface-2) 0%, #0f172a 100%);

  /* Пост - боје за временску линију */
  --fasting-water-bg: rgba(96, 165, 250, 0.25);
  --fasting-oil-bg: rgba(251, 191, 36, 0.3);
  --fasting-fish-bg: rgba(45, 212, 191, 0.25);
  --fasting-dairy-bg: rgba(252, 211, 77, 0.2);

  --fasting-water-cell: var(--color-primary);
  --fasting-water-cell-end: var(--color-primary-700);
  --fasting-water-border: var(--color-primary);

  --fasting-oil-cell: #7f1d1d;
  --fasting-oil-cell-end: #991b1b;
  --fasting-oil-border: #7f1d1d;

  --fasting-fish-cell: #991b1b;
  --fasting-fish-cell-end: #7f1d1d;
  --fasting-fish-border: #991b1b;

  --fasting-dairy-cell: #450a0a;
  --fasting-dairy-cell-end: #7f1d1d;
  --fasting-dairy-border: #450a0a;
}

/* ==========================================================================
   2. ОСНОВНИ ЕЛЕМЕНТИ
   ========================================================================== */

[data-theme="dark"] body {
  background-color: var(--color-surface);
  color: var(--color-text);
}

[data-theme="dark"] body > footer {
  background-color: #0f172a;
  color: var(--color-text);
}

/* ==========================================================================
   3. ФОРМЕ И ИНПУТИ
   ========================================================================== */

[data-theme="dark"] input[type="text"],
[data-theme="dark"] input[type="search"],
[data-theme="dark"] input[type="number"],
[data-theme="dark"] input[type="date"],
[data-theme="dark"] input[type="email"],
[data-theme="dark"] input[type="time"],
[data-theme="dark"] select,
[data-theme="dark"] textarea {
  background: var(--color-surface-2);
  color: var(--color-text);
  border-color: var(--color-border);
  box-shadow: none;
}

[data-theme="dark"] input::placeholder,
[data-theme="dark"] textarea::placeholder {
  color: #94a3b8;
}

[data-theme="dark"] .search-input {
  background: var(--color-surface-2);
  color: var(--color-text);
  border-color: var(--color-border);
}

/* Претрага - overlay */
[data-theme="dark"] #search-overlay {
  background: var(--color-surface-2);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}

@media (max-width: 768px) {
  [data-theme="dark"] #search-overlay {
    background: color-mix(in oklab, var(--color-surface-2) 92%, transparent);
  }
  [data-theme="dark"] .search-box {
    background: var(--color-surface-2);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  }
  [data-theme="dark"] .close-search {
    color: var(--color-text);
    background: #1f2937;
  }
  [data-theme="dark"] .close-search:hover {
    background: #374151;
  }
}

/* ==========================================================================
   4. КАРТИЦЕ И ПАНЕЛИ
   ========================================================================== */

[data-theme="dark"] .panel,
[data-theme="dark"] .card,
[data-theme="dark"] .container-panel {
  background: var(--color-surface-2);
  color: var(--color-text);
  border-color: var(--color-border);
}

[data-theme="dark"] .u-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Подсетници за славе на почетној */
[data-theme="dark"] .slava-reminders {
  background-color: var(--color-surface-2);
  border-color: var(--color-border);
  color: var(--color-text);
}

/* ==========================================================================
   5. ЛИСТЕ И СТАВКЕ
   ========================================================================== */

[data-theme="dark"] .stavka {
  border-bottom-color: var(--color-border);
}

[data-theme="dark"] .stavka:hover {
  background-color: var(--color-surface-2);
}

[data-theme="dark"] .stavka-veza {
  color: var(--color-text);
}

[data-theme="dark"] .stavka__member-role-badge {
  background: rgba(162, 21, 20, 0.2);
}

[data-theme="dark"] .pagination {
  border-top-color: var(--color-border);
}

/* ==========================================================================
   6. КАЛЕНДАР
   ========================================================================== */

/* Навигација */
[data-theme="dark"] .calendar-navigation {
  background: var(--color-surface-2);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .nav-arrow:hover {
  background: color-mix(in oklab, var(--color-surface-2) 85%, transparent);
}

/* Ћелије календара */
[data-theme="dark"] .calendar-cell {
  background: var(--color-surface-2);
  border-color: var(--color-border);
}

[data-theme="dark"] .calendar-cell .weekday,
[data-theme="dark"] .calendar-cell .no-slavas-text {
  opacity: 1;
  color: var(--color-text-muted);
}

/* Данас - златни сјај */
[data-theme="dark"] .calendar-cell.today {
  background: linear-gradient(135deg, var(--color-amber-900) 0%, var(--color-amber-800) 100%);
  border: 3px solid var(--color-amber-500);
  box-shadow: 0 0 0 1px var(--color-amber-500), 0 2px 12px rgba(245, 158, 11, 0.3);
  color: var(--color-amber-400);
}

[data-theme="dark"] .calendar-cell.today .date {
  color: var(--color-amber-200);
  font-weight: 800;
}

[data-theme="dark"] .calendar-cell.today .weekday {
  color: var(--color-amber-300);
  font-weight: 600;
}

[data-theme="dark"] .calendar-cell.today .slavas,
[data-theme="dark"] .calendar-cell.today .slavas div {
  color: var(--color-amber-100) !important;
}

[data-theme="dark"] .calendar-cell.today .slava-link:hover {
  background: var(--color-white-alpha-20);
}

/* Црвено слово */
[data-theme="dark"] .calendar-cell.crveno-slovo {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-700) 100%);
  border-color: var(--color-primary);
  color: var(--color-surface) !important;
}

[data-theme="dark"] .calendar-cell.crveno-slovo .weekday,
[data-theme="dark"] .calendar-cell.crveno-slovo .slavas,
[data-theme="dark"] .calendar-cell.crveno-slovo .slavas div,
[data-theme="dark"] .calendar-cell.crveno-slovo .no-slavas-text,
[data-theme="dark"] .calendar-cell.crveno-slovo .date,
[data-theme="dark"] .calendar-cell.crveno-slovo .fasting-icon {
  color: var(--color-surface) !important;
}

/* Пост - ћелије календара */
[data-theme="dark"] .calendar-cell.fasting-вода {
  background: linear-gradient(135deg, color-mix(in oklab, var(--color-primary) 35%, var(--color-surface-2)) 0%, color-mix(in oklab, var(--color-primary) 25%, var(--color-surface-2)) 100%);
  border-color: color-mix(in oklab, var(--color-primary) 40%, var(--color-surface-2));
}

[data-theme="dark"] .calendar-cell.fasting-уље {
  background: linear-gradient(135deg, #7f1d1d 0%, #6b1515 100%);
  border-color: #7f1d1d;
}

[data-theme="dark"] .calendar-cell.fasting-риба {
  background: linear-gradient(135deg, #6b1515 0%, #5a1111 100%);
  border-color: #6b1515;
}

[data-theme="dark"] .calendar-cell.fasting-бели_мрс {
  background: linear-gradient(135deg, #5a1111 0%, color-mix(in oklab, var(--color-primary) 10%, var(--color-surface-2)) 100%);
  border-color: #5a1111;
}

/* Slava линкови */
[data-theme="dark"] .slava-link:hover {
  background: var(--color-primary-transparent);
}

/* ==========================================================================
   7. ВРЕМЕНСКА ЛИНИЈА (Timeline)
   ========================================================================== */

/* Данас */
[data-theme="dark"] .timeline__day--today {
  background: var(--color-surface-1);
  border: 2px solid var(--color-border);
  border-left: 4px solid var(--color-primary);
}

[data-theme="dark"] .timeline__day--today .timeline__date {
  color: var(--color-text);
  font-weight: 800;
}

[data-theme="dark"] .timeline__day--today .timeline__label {
  color: var(--color-text-muted);
  font-weight: 600;
}

[data-theme="dark"] .timeline__day--today .timeline__name {
  color: var(--color-text);
}

[data-theme="dark"] .timeline__day--today .timeline__item {
  background: var(--color-surface-2);
  border: 1px solid var(--color-border);
}

/* Пост - временска линија */
[data-theme="dark"] .timeline__day--fasting.fasting-вода {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-700) 100%);
}

[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__date,
[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__label,
[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__name,
[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__empty-day {
  color: var(--color-surface) !important;
}

[data-theme="dark"] .timeline__day--fasting.fasting-уље {
  background: linear-gradient(135deg, var(--color-primary-200) 0%, var(--color-primary-100) 100%);
}

[data-theme="dark"] .timeline__day--fasting.fasting-риба {
  background: linear-gradient(135deg, var(--color-primary-100) 0%, var(--color-primary-50) 100%);
}

[data-theme="dark"] .timeline__day--fasting.fasting-бели_мрс {
  background: linear-gradient(135deg, var(--color-primary-50) 0%, color-mix(in oklab, var(--color-primary) 5%, var(--color-surface-2)) 100%);
}

/* Важни празници */
[data-theme="dark"] .timeline__day--important {
  border: 2px solid var(--color-primary);
  box-shadow: 0 0 0 1px var(--color-primary-700), 0 2px 8px color-mix(in oklab, var(--color-primary) 20%, transparent);
}

/* Tooltip за пост */
[data-theme="dark"] .fasting-tooltip {
  background: var(--color-surface-2);
  border-color: var(--color-border);
  color: var(--color-text);
}

/* Празан дан */
[data-theme="dark"] .timeline__empty-day {
  color: var(--color-text-muted);
}

/* Раздвајач слава */
[data-theme="dark"] .slavas-separator {
  background: var(--color-border);
  opacity: 0.5;
}

/* Покретне и непокретне славе */
[data-theme="dark"] .slava-moveable {
  color: var(--color-text);
}

[data-theme="dark"] .slava-fixed {
  color: var(--color-text-muted);
  opacity: 0.7;
}

/* ==========================================================================
   8. ДУГМАД
   ========================================================================== */

[data-theme="dark"] .dugme-crveno {
  color: #fff;
}

/* ==========================================================================
   9. UTILITY КОМПОНЕНТЕ (data-theme атрибути)
   ========================================================================== */

[data-theme="dark"] [data-theme-aware],
[data-theme="dark"] [data-theme-card] {
  background: var(--color-surface-2) !important;
  border-color: var(--color-border) !important;
}

[data-theme="dark"] [data-theme-text] {
  color: var(--color-text) !important;
}

[data-theme="dark"] [data-theme-text-secondary] {
  color: var(--color-text-muted) !important;
}
