/* Dark theme overrides using CSS variables and scoped selectors */

/* Override base color tokens when [data-theme="dark"] is set on <html> */
:root[data-theme="dark"] {
  --color-primary: #A21514; /* keep brand color */
  --color-primary-700: #9c1818;
  /* Dark theme variants for primary shades to maintain contrast */
  --color-primary-50: color-mix(in oklab, var(--color-primary) 14%, black);
  --color-primary-100: color-mix(in oklab, var(--color-primary) 22%, black);
  --color-primary-200: color-mix(in oklab, var(--color-primary) 32%, black);
  --color-text: #e5e7eb;
  --color-text-muted: #cbd5e1;
  --color-surface: #0b0f14;    /* page background */
  --color-surface-2: #111827;  /* panels/cards */
  --color-surface-1: #1f2937;  /* intermediate surface for controls */
  --color-border: #334155;     /* borders */
}

/* Page background and text */
[data-theme="dark"] body {
  background-color: var(--color-surface);
  color: var(--color-text);
}

/* Footer */
[data-theme="dark"] body > footer {
  background-color: #0f172a;
  color: var(--color-text);
}

/* Forms */
[data-theme="dark"] input[type="text"],
[data-theme="dark"] input[type="search"],
[data-theme="dark"] input[type="number"],
[data-theme="dark"] input[type="date"],
[data-theme="dark"] input[type="email"],
[data-theme="dark"] input[type="time"],
[data-theme="dark"] select,
[data-theme="dark"] textarea {
  background: var(--color-surface-2);
  color: var(--color-text);
  border-color: var(--color-border);
  box-shadow: none;
}

[data-theme="dark"] input::placeholder,
[data-theme="dark"] textarea::placeholder {
  color: #94a3b8;
}

/* Header dropdown and search overlay */
[data-theme="dark"] #search-overlay {
  background: var(--color-surface-2);
  box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

/* Mobile search overlay and box in dark theme */
@media (max-width: 768px) {
  [data-theme="dark"] #search-overlay {
    background: color-mix(in oklab, var(--color-surface-2) 92%, transparent);
  }
  [data-theme="dark"] .search-box {
    background: var(--color-surface-2);
    box-shadow: 0 2px 8px rgba(0,0,0,0.5);
  }
  [data-theme="dark"] .close-search {
    color: var(--color-text);
    background: #1f2937;
  }
  [data-theme="dark"] .close-search:hover {
    background: #374151;
  }
}

/* Tables/list panels if any use light surfaces */
[data-theme="dark"] .panel,
[data-theme="dark"] .card,
[data-theme="dark"] .container-panel {
  background: var(--color-surface-2);
  color: var(--color-text);
  border-color: var(--color-border);
}

/* Lists */
[data-theme="dark"] .stavka { border-bottom-color: var(--color-border); }
[data-theme="dark"] .stavka:hover { background-color: var(--color-surface-2); }
[data-theme="dark"] .stavka-veza { color: var(--color-text); }
[data-theme="dark"] .search-input {
  background: var(--color-surface-2);
  color: var(--color-text);
  border-color: var(--color-border);
}
[data-theme="dark"] .pagination { border-top-color: var(--color-border); }

/* Slava reminders on the homepage */
[data-theme="dark"] .slava-reminders {
  background-color: var(--color-surface-2);
  border-color: var(--color-border);
  color: var(--color-text);
}

/* Golden highlight for the current-day section in the Slava timeline - using variables */
[data-theme="dark"] .timeline__day--today {
  background: var(--color-surface-1);
  border: 2px solid var(--color-border);
  border-left: 4px solid var(--color-primary);
}
[data-theme="dark"] .timeline__day--today .timeline__date {
  color: var(--color-text);
  font-weight: 800;
}
[data-theme="dark"] .timeline__day--today .timeline__label {
  color: var(--color-text-muted);
  font-weight: 600;
}
[data-theme="dark"] .timeline__day--today .timeline__name {
  color: var(--color-text);
}
[data-theme="dark"] .timeline__day--today .timeline__item {
  background: var(--color-surface-2);
  border: 1px solid var(--color-border);
}

/* Fasting colors in dark mode */
[data-theme="dark"] .timeline__day--fasting.fasting-вода {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-700) 100%);
}

[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__date,
[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__label,
[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__name,
[data-theme="dark"] .timeline__day--fasting.fasting-вода .timeline__empty-day {
  color: var(--color-surface) !important;
}

[data-theme="dark"] .timeline__day--fasting.fasting-уље {
  background: linear-gradient(135deg, var(--color-primary-200) 0%, var(--color-primary-100) 100%);
}

[data-theme="dark"] .timeline__day--fasting.fasting-риба {
  background: linear-gradient(135deg, var(--color-primary-100) 0%, var(--color-primary-50) 100%);
}

[data-theme="dark"] .timeline__day--fasting.fasting-бели_мрс {
  background: linear-gradient(135deg, var(--color-primary-50) 0%, color-mix(in oklab, var(--color-primary) 5%, var(--color-surface-2)) 100%);
}

/* Important observances in dark mode */
[data-theme="dark"] .timeline__day--important {
  border: 2px solid var(--color-primary);
  box-shadow: 0 0 0 1px var(--color-primary-700), 0 2px 8px color-mix(in oklab, var(--color-primary) 20%, transparent);
}

/* Fasting tooltips in dark mode */
[data-theme="dark"] .fasting-tooltip {
  background: var(--color-surface-2);
  border-color: var(--color-border);
  color: var(--color-text);
}

/* Empty day text in dark mode */
[data-theme="dark"] .timeline__empty-day {
  color: var(--color-text-muted);
}

/* Slavas separator in dark mode */
[data-theme="dark"] .slavas-separator {
  background: var(--color-border);
  opacity: 0.5;
}

/* Moveable and fixed slavas in dark mode */
[data-theme="dark"] .slava-moveable {
  color: var(--color-text);
}

[data-theme="dark"] .slava-fixed {
  color: var(--color-text-muted);
  opacity: 0.7;
}

/* Buttons using existing classes (dugme-crveno stays brand); add neutral button if needed */
[data-theme="dark"] .dugme-crveno {
  /* keep default styles; ensure text contrast */
  color: #fff;
}

/* Calendar page overrides for dark theme */
[data-theme="dark"] .calendar-navigation {
  background: var(--color-surface-2);
  box-shadow: 0 2px 8px rgba(0,0,0,0.5);
}
[data-theme="dark"] .nav-arrow:hover {
  background: color-mix(in oklab, var(--color-surface-2) 85%, transparent);
}
[data-theme="dark"] .calendar-cell {
  background: var(--color-surface-2);
  border-color: var(--color-border);
}
[data-theme="dark"] .calendar-cell .weekday,
[data-theme="dark"] .calendar-cell .no-slavas-text {
  opacity: 1;
  color: var(--color-text-muted);
}
